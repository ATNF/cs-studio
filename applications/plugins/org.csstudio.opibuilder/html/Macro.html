<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=Cp1252"/>
    <link rel="stylesheet" href="default.css" type="text/css" />
    <title>
    Macro
    </title>
  </head>
  <body>

    <h2>
       Macro       
    </h2>
    <p>Macros are some predefined strings that can be
     embedded in any string based properties such as "PV Name", "Text", "Tooltip", 
     "Scripts" and so on. Macro will be replaced with its string value at Runtime.</p>
     <h3>Format</h3>
     <p>
     The macro format can be either <b>$(macro_name)</b> or <b>${macro_name}</b>
     </p>
     <p>
There are two types of macros:
</p>
<h3>
Predefined Symbol Macro</h3>

<p>Symbol Macros can be defined in several places as listed below. 
 If a same macro is defined in multiple places and 
 the option <code>Include macros from parent</code> in Macros property is selected,
 it will be overriden in the order as below. 
 For example, macros defined in Display's Macro property will override the macros defined in Open OPI Actions, 
 and macros defined in Open OPI Actions will override the macros defined in BOY Preferences.
</p>

<ol>
<li>BOY Runtime Preferences<br> BOY runtime preference can be opened from menu: 
<code>CSS->Preferences...->CSS Applications->Display->BOY->OPI Runtime</code></li>
<li>Open OPI Actions<br>It includes open OPI from actions, open OPI from command line and 
open OPI from top OPIs button.</li>
<li>Display<br> Defined in the <code>Macros</code> property of Display.</li>
<li>Contianer<br>Defined in the <code>Macros</code> property of container widget, such as
 Grouping Container, Linking Container and Tabbed Container.</li>
</ol>

<p><b><font color="red">Attention</font></b>: Macro name only allows letters and numbers (should not start with number).
   
</p> 
<h3>Widget Property Value Macro</h3>
<p>This allows you access the value of a property of the widget in run mode. In this case, the macro_name is the property id of the widget property. For example, $(pv_name), $(pv_value), $(forground_color)...
<br>A good example of Widget Property Value Macro is the tooltip: A tooltip of "$(pv_name)$(pv_value)" will display the PV Name and its value in run mode.  
</p>
<p><img src="img/tooltip.png"></p>
  
<h3>System Macros</h3>
<p>These macros are predefined in BOY. They can be overriden by Symbol Macros. Here are two macros available: </p>
<ul>
	<li><code>$(DID)</code>: The unique ID for each display. Even if there are
	 multiple displays refering tho the same OPI file,  each display still has an unique ID.
	 This macro is useful for avoiding 
	name conflict. For example, if we add a prefix of <code>$(DID)_</code> to a local PV name, we can easily 
	guarantee the PV name is unique to this display. </li>
</ul>
<ul><li><code>$(DNAME)</code>: The name of the display.</li></ul>

</p>  
  
</body>
</html>
