<!-- "Beamline" Configuration

  Control-system related tools that use this:
  
  * Aggregator
    Determines which PVs to monitor and merge into
    the experiment data stream (nexus file).
    
  * Scan Server
    Defines human-readable alias names for raw PV names.
    Allows GUIs to suggest device/PV names.
    
  * Soft IOC control
    Allows automatomated start/stop of the required IOCs
    when beamline configuration is changed.
    
  * More:
    For example automatically generate summary of
    "beam line devices are ready for experiment".

  Eventually, this type of information could 
  be stored in a relational database,
  with convenient web interfaces, iPhone apps,
  "Channel Finder" bindings etc.
  
  This XML format is a basis for discussing the content,
  the beam line data that is required to configure
  certain control system tools.
  It will then allow the initial implementation of these tools.

  In the long run, the XML file can be auto-generated
  from an RDB, and tools could also directly read from the RDB.
  Still, for robustness' sake, they may always prefer reading
  a local XML "snapshot" over relying on an RDB connection to a server
  that's outside of the beamline subnet.
  -->
<beamline>
    <!-- There can be beam line info, we probably don't care -->
    <info>
	    <name>BL99</name>
	    <description>Medium-angle convoluted scattering</description>
    </info>
    <!-- Devices that are currently on the beam line -->
	<devices>
        <!-- In the future, it may be useful to define these in a hierarchy,
             for example organize devices by "section" or "component"
             of the beam line.
             
             The tools we create for now should ignore those levels of hierarchy
             and concentrate on the elements of interest.
             
             For example, the Scan Server and Aggregator simply
             look for <pv> anywhere below <devices>:
             The Aggregator logs any <pv> that has a <log/> flag.
             The Scan Server allows access to all PVs with a <scan/> flag,
             optionally using their alias instead of the "real" name.
             
             The IOC control tools don't care about the PV names, they only
             see which <ioc>s need to be operational
          -->
	    <device>
	        <name>2-D Translation Table</name>
	        <ioc><name>ics-bl99-tt2-ioc</name></ioc>
	        <pv><name>motor_x</name><alias>xpos</alias><log/><scan/></pv>
            <pv><name>motor_y</name><alias>ypos</alias><log/><scan/></pv>
	    </device>
	    
	    <!-- In this example the 'setpoint' PV can be scanned,
	         but the 'readback' is logged.
	      -->
        <device>
            <name>Deep frying heater</name>
            <ioc><name>ics-bl99-dfh-ioc</name></ioc>
            <pv><name>setpoint</name><alias>setpoint</alias><scan/></pv>
            <pv><name>readback</name><alias>readback</alias><log/></pv>
        </device>

        <device>
            <name>Scan/Data Acquisition</name>
            <pv><name>active</name><alias>active</alias><scan/></pv>
        </device>

<!-- 
        <device>
            <name>Motor</name>
            <ioc><name>motorSim</name></ioc>
            <pv><name>IOC:m1</name><alias>IOC:m1</alias><scan/></pv>
            <pv><name>IOC:m1.RBV</name><alias>IOC:m1.RBV</alias><log/></pv>
        </device>
 -->
	</devices>
</beamline>
