<?xml version='1.0' encoding='iso-8859-1'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="de" lang="de" dir="ltr">

<head>
	<meta content="text/html; charset=ISO-8859-1" http-equiv="content-type" />
	<title>Data Browser</title>
</head>

<body>
<h2>Formula</h2>
<p>
Die Kontextmenus des <a href="plot_window.html">Plot Window</a> und des
<a href="config_view.html">Data Browser Config View</a>
gestatten das Hinzuf&uuml;gen von Formeln.
</p>

<h2>Formula Configuration</h2>
<p>Wenn man eine Formel hinzuf&uuml;gt oer sie sp&auml;tr im Konfigurations-View ausw&auml;hlt,
&ouml;ffnet sich der Formel-Konfigurations-Dialog.</p>
<p>
<img src="./formula_cfg.png" width="831" height="436" alt="Formula Config" />
</p>
<p> 
<object>
<ol>
<li>Der <u>Inputs</u>-Abschnitt enth&auml;lt eine Liste aller PVs der aktuellen 
    Konfiguration als m&ouml;gliche inputs und erlaubt die Zuweisung k&uuml;rzerer 
    <u>Variablen</u>-Namen, die in der Formel benutzt werden k&ouml;nnen.
Anklicken eines Variable Namen zum editieren. </li>
<li>Editieren der Formel, entweder direktes Eintippen in das <u>Formula</u>-
Textfeld oder mit Hilfe von Benutzung von <u>Functions</u> and <u>Basic Calculations</u>. </li>
<li>Die <u>Parsed Formula</u>-Info unten zeigt 'basic error messages'. </li>
</ol>
</object>
</p>

<h3>Basic Calculations</h3>
<p>... bedienen wie einen gew&ouml;hnlichen Taschenrechner</p>

<h3>Functions</h3>

<ul>
<li>Alle im Dialog gezeigten Funktionen haben ein Argument, 
    solange nicht ausdr&uuml;cklich etwas andere erw&auml;hnt ist, 
beispielsweise <code>sin(x)</code>. </li>
<li><code>atan2(y,x)</code> hat 2 Argumente und berechnet 
     <code>atan(y/x)</code> mit zus&auml;tzlicher Ber&uuml;cksichtigung 
von 4 m&ouml;glichen Quadranten. </li>
<li>Alle trigonometrischen Funktionen arbeiten in radians.
    Die Funktionen <code>toDegrees</code> bzw. <code>toRadians</code>
    k&ouml;nnen f&uuml;r Umwandlungen benutzt werden, z.B.:
<code>toDegrees(sin(x+toRadians(30)))</code>. </li>
<li><code>min</code>, <code>max</code> haben ein oder mehr Argumente,
z.B. <code>min(x, y, 1)</code>. </li>
<li><code>^</code> wie in <code>x^y</code>
rechnet <code>x</code> hoch <code>y</code>. </li>
<li><code>? :</code> ist ein if-then-else-Operator,
z.B. <code>x > 0 ? x^2 : 0</code>. </li>
<li>Boolesche Operatoren
    <code>==</code>,
    <code>!=</code>,
    <code>&gt;</code>,
    <code>&gt;=</code>,
    <code>&lt;</code>,
    <code>&lt;=</code>
werden unterst&uuml;tzt, aber m&ouml;chten direkt in die Formel eingetippt werden. </li>
<li><code>rnd(x)</code> gibt eine Zufallszahl aus dem Bereich <code>[0...x]</code> zur&uuml;ck</li>
<li><code>PI</code>, <code>E</code> sind vordefinierte Konstanten. </li>
</ul>

<h2>Formula Behavior at Runtime</h2>
<p>Die Formel wird basierend auf den Daten, die im Plot gezeigt werden, 
ausgewertet, weil dies reibungsloses Arbeiten mit Archivdaten und 
'life'-Daten aus verschiedenen Quellen erlaubt.
</p>
<p>
<img src="./formula_runtime.png" width="627" height="291" alt="Formula in Plot" />
</p>
<p>
Ein Nachteil ist, dass die Qualit&auml;t der berechneten Daten immer als "interpoliert" 
betrachtet werden muss und durch die Zeitfenster-Granularit&auml;t der 
Daten, die im Plot sichtbar sind, limitiert ist.
Der Versuch, Daten vom Archiv UND einer Formel zu exportieren,
wird durch eine entsprechende Warnung angezeigt.
</p>
</body>
</html>