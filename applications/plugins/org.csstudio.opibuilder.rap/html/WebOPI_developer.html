<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=Cp1252"/>
    <link rel="stylesheet" href="default.css" type="text/css" />
    <title>
     WebOPI
    </title>
</head>
<body>

<h2>WebOPI Developer Manual</h2>
<h3>Install RAP platform</h3>
<p>WebOPI is developed on RAP, so you must have RAP installed in your Eclipse. You can simple download 
<code>Eclipse for RCP and RAP developers</code> from 
<a href="http://www.eclipse.org/downloads/">http://www.eclipse.org/downloads/</a>.
</p>

<p>Before getting your foot wet on WebOPI, please take few minutes to familiar with RAP development:<br>
<a href="http://www.eclipse.org/rap/">http://www.eclipse.org/rap/</a><br>
<a href="http://www.vogella.de/articles/EclipseRAP/article.html">
http://www.vogella.de/articles/EclipseRAP/article.html</a>
</p>

<h3>Get WebOPI source code</h3>
<p>
In CSS sourceforge repository, you need to import these plugins to your workspace:
<ul>
<li>org.csstudio.apputil</li>
<li>org.csstudio.csdata</li>
<li>org.csstudio.data</li>
<li>org.csstudio.java</li>
<li>org.csstudio.openfile</li>
<li>org.csstudio.opibuilder</li>
<li>org.csstudio.opibuilder.rap</li>
<li>org.csstudio.opibuilder.widgets</li>
<li>org.csstudio.opibuilder.widgets.rap</li>
<li>org.csstudio.platform.libs.epics</li>
<li>org.csstudio.rap.core</li>
<li>org.csstudio.rap.ui.util</li>
<li>org.csstudio.swt.widgets</li>
<li>org.csstudio.swt.xygraph</li>
<li>org.csstudio.swt.xygraph.rap</li>
<li>org.csstudio.utility.pv</li>
<li>org.csstudio.utility.pv.epics</li>
<li>org.csstudio.utility.pv.simu</li>
<li>org.jdom</li>
</ul>
</p>

<h3>Add GEF/Draw2D to RAP target platform</h3>
<p>
WebOPI also based on the RAP GEF which is an incubating project under RAP.
The code has been built to JAR files which are under <code>org.csstudio.rap.core/third_party_plugins</code>.
So you need to add these plugins to your RAP target platform:
<ol>
<li>Go to <code>Eclipse Preferences Window->Plug-in Development->Target Platform</code> page</li>
<li>Click on RAP Target platform and select <code>Edit...</code></li>
<li>Select <code>Add...</code> button to add the directory that points to
<code>org.csstudio.rap.core/third_party_plugins</code>
</li>
<li>Finish.</li>
</ol>
</p>


<h3>Launch WebOPI from Eclipse</h3>
<ol>
<li>Since there is no $CATALINA_HOME is set for debugging mode,
it will use the settings in <code>preferences.ini</code> under <code>org.csstudio.opibuilder</code> and 
<code>org.csstudio.platform.libs.epics</code> plugin.
Make corresponding changes for your environment.</li>
<li>Open <code>plugin.xml</code> in <code>org.csstudio.opibuilder.rap</code> plugin and click 
<code>Launch a RAP application</code>.</li>
</ol>


<h3>Build WAR file</h3>
<p>Open <code>webopi.warproduct</code> and click on <code>Eclipse WAR product export wizard</code>
to export the WAR file. To allow multiple sessions in a same browser, you need to disable cookies. Copy the folder
<code>META-INF</code> under <code>html</code> foder to the same directory of webopi.war.
Then execute the command <code>jar uf webopi.war META-INF/</code> to add this folder to webopi.war.
Now, you can deploy the WAR file on a tomcat server. See
<a href="WebOPI.html">WebOPI user manual</a>.
</p>

<h3>Debug URL</h3>
<p>To show debug information, you can append <code>rap?startup=debug</code> to <code>webopi/</code>.
For example: <br>   <code>http://your_site.com/webopi/rap?startup=debug</code>. 
<br> If you want to show more lines,
you can append <code>&lines=number</code>. 
For example, <br><code>http://your_site.com/webopi/rap?startup=debug&lines=500</code>.</p>
 
 <br>
 <br>
 
</body>
</html>
