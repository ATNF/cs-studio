<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=Cp1252"/>
    <link rel="stylesheet" href="default.css" type="text/css" />
    <title>
      Script Introduction
    </title>
  </head>
  <body>

    <h1>
      Attaching JavaScripts to Widgets
    </h1>
    <p>
To obtain more flexible hehaviors than just setting from properties sheet, you can attach scripts to widgets or OPI.
The script grammar is JavaScript, but more than plain javascript, 
you can set PVs as input and change properties of widgets in the script. 
The script execution is triggered by input PVs.
That means the change of PV value will trigger the execution of script. In script, the value or severity of the input PVs are accessible. 
</p>
<p>Besides, all Java APIs are accessible in script by importing the package of java.lang.</p>

<h3>
Steps to attach scripts to a widget:
</h3>
<ol>
	<li>Select <b>Scripts</b> property in  property sheet view.
	</li>
	<li>In <b>Attach Scripts</b> Dialog, you can add more than one script. For each script, you can specify more than one PV as the input.
	<p>
	<img src="script/img/ScriptDialog.PNG" alt="Script Configuration Dialog" />
	</p>
	</li>
	<li>Run OPI to see the result.
	</li>
</ol>

<h3>JavaScript Grammar Tutorial</h3>
<p>
There are lots of free JavaScript Tutorial available from Internet, for example <a href = "http://www.w3schools.com/JS/default.asp">w3schools JS Tutorial.</a>
You only need to read the JavaScript grammar part. The other parts are not appliable in BOY.   
</p>

<h3>JavaScript Objects</h3>
<p>Please notice that the JavaScript in BOY is not executed in an environment of browser, so the 
objects such as <code>document</code> and methods such as <code>alert()</code>, <code>confirm()</code> 
are not available here, but the JavaScript Objects such as <code>Date</code>, <code>Array</code>, 
<code>Math</code> are still available. This is an example showing the current datetime on a Label widget.
<pre class="example_code">
widgetController.setPropertyValue("text", new Date().toString());</pre>
</p>
  
  </body>
</html>
